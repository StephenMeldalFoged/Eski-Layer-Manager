VERSION HISTORY - Eski Layer Manager
=====================================

This file tracks features added in each version to help jump back to specific versions if needed.

---

Version 0.1.0 (Initial Setup)
Date: 2025-12-03
Git Tag: v0.1.0

Features:
- Repository initialized
- Basic project structure established
- Technology decision: Python with PySide6 for UI, pymxs for 3ds Max API access

---

Version 0.2.0 (Basic Dockable Window)
Date: 2025-12-03
Git Tag: v0.2.0 (to be created)

Features:
- Created eski-layer-manager.py main script
- Implemented QDockWidget-based dockable window
- Window title: "Eski LayerManager by Claude 0.2.0"
- Connection to 3ds Max main window via qtmax.GetQMaxMainWindow()
- Dockable to left and right sides only
- Window set to dock right side by default
- Placeholder UI with empty shell
- Proper window flags and cleanup on close
- show_layer_manager() function to launch from 3ds Max
- Standalone testing capability outside 3ds Max

Usage in 3ds Max:
  import eski_layer_manager
  eski_layer_manager.show_layer_manager()

---

Version 0.6.1 (Nested Layer Hierarchy Support)
Date: 2025-12-04
Git Tag: v0.6.1 (to be created)

Features:
- Full nested layer hierarchy support
- Displays parent-child layer relationships with indentation
- Automatically expands parent layers by default (like native layer manager)
- Drag-and-drop layer reparenting
  - Drop ON a layer to make it a child
  - Drop ABOVE/BELOW a layer to make it a sibling
  - Drop on empty space to make it a root layer
  - Circular reference prevention (can't make layer child of itself or descendant)
- Recursive layer tree traversal for finding and selecting layers
- MAXScript API methods used:
  - layer.getParent() - Get parent layer
  - layer.setParent(parent) - Set parent layer
  - layer.getNumChildren() - Count child layers
  - layer.getChild(index) - Get child by 1-based index
- Alphabetical sorting maintained at each hierarchy level
- Test mode includes sample hierarchy for UI development
- New debug output: [HIERARCHY] prefix for hierarchy operations
- New debug output: [DRAG] prefix for drag-and-drop operations

Usage in 3ds Max:
  import eski_layer_manager
  eski_layer_manager.show_layer_manager()

  # Drag layers to reparent them
  # Drop on a layer to nest under it
  # Drop between layers to make siblings
  # Drop on empty space to make root

API References:
- https://stackoverflow.com/questions/28325804/3ds-max-nested-layers-hierarchy
- https://help.autodesk.com/cloudhelp/2017/ENU/MAXScript-Help/files/GUID-78B79975-7BA5-4A03-8FEF-27E78D14B575.htm

---

Version 0.6.2 (Nested Layers Debug & Fix)
Date: 2025-12-04
Git Tag: v0.6.2 (to be created)

Features:
- Enhanced debug output for nested layer operations
- Better error handling for getParent() to handle pymxs undefined values
- Added extensive [HIERARCHY] debug messages showing:
  - Parent layer detection for each layer
  - Root layer identification
  - Child count for each layer
  - Individual child names
- Fixed parent detection to check string representation of undefined
- Added try-catch blocks around all hierarchy operations

Bug Fixes:
- Fixed issue with detecting root layers (parent comparison with undefined)
- Added fallback for layers where getParent() fails

---

Version 0.6.3 (Tree View UI Improvements)
Date: 2025-12-04
Git Tag: v0.6.3 (to be created)

Features:
- Explicitly enabled tree view hierarchy visualization
- Added setIndentation(20) for proper child indentation
- Added setRootIsDecorated(True) to show expand/collapse arrows
- Added setAnimated(True) for smooth expand/collapse animations
- Tree now properly shows hierarchy with visual arrows like native layer manager

UI Improvements:
- Expand/collapse arrows now visible for parent layers
- 20px indentation for child layers
- Smooth animation when expanding/collapsing
- Matches native layer manager visual style

---

Version 0.6.4 (Reduce Debug Spam)
Date: 2025-12-04
Git Tag: v0.6.4 (to be created)

Changes:
- Removed all debug print statements to stop MAXScript Listener spam
- Kept only [ERROR] print statements for critical issues
- Replaced debug prints with pass statements to maintain code structure
- Much cleaner output - only shows errors when they occur

---

Version 0.6.5 (Remove Delegate Spam)
Date: 2025-12-04
Git Tag: v0.6.5 (to be created)

Changes:
- Removed [DELEGATE] debug prints from VisibilityIconDelegate paint method
- No more spam from icon rendering on every repaint
- MAXScript Listener now completely clean - only ERROR messages

---

Version 0.6.6 (Fix Hierarchy - Restore Lost Code)
Date: 2025-12-04
Git Tag: v0.6.6 (to be created)

Bug Fixes:
- Restored hierarchy code that was lost during git checkout
- Re-implemented populate_layers() with proper hierarchy building
- Re-added _add_layer_to_tree() recursive method
- Layers now properly display nested with arrows and indentation
- Test mode now shows example hierarchy

Debug Output:
- Added [HIERARCHY] prints to track parent-child relationships
- Shows which layers are roots vs children
- Displays child count and names for each parent layer

---

Version 0.6.8 (Add Manual Arrow Column)
Date: 2025-12-04
Git Tag: v0.6.8 (to be created)

Features:
- Added dedicated arrow column (column 0) for all layers
- Shows ‚ñ∂ arrow for all layers (preparation for hierarchy)
- New 4-column layout: Arrow | Visibility | Add Selection | Layer Name
- Arrow column is 30px wide, centered text

Changes:
- Updated all column references throughout codebase
- Column 0: Arrow (click handler ready for expand/collapse)
- Column 1: Visibility icon (moved from column 0)
- Column 2: Add selection icon (moved from column 1)
- Column 3: Layer name (moved from column 2)
- Custom delegate now works on column 1
- All click handlers updated for new column layout

---

Version 0.6.10 (Fix Icon Delegate Positioning)
Date: 2025-12-04
Git Tag: v0.6.10 (to be created)

Bug Fixes:
- Fixed delegate paint method to use option.rect instead of creating rect at x=0
- Visibility icons now render in correct column (column 1) instead of overlapping column 0
- Arrows and eyes now properly separated in their respective columns

Technical Details:
- Delegate was creating QtCore.QRect(0, y, width, height) which drew from absolute left
- Now uses option.rect which has correct x-position for the column
- Much simpler and cleaner delegate implementation

IMPORTANT: Version policy is to increment patch version (0.6.X), not minor version (0.X.0).

---

Version 0.6.11 (Fix Click Handler Layer Name)
Date: 2025-12-04
Git Tag: v0.6.11 (to be created)

Bug Fixes:
- Fixed on_layer_clicked to get layer name from column 3 instead of column 2
- Visibility toggle (eye icon) now works again
- Add selection (+) button now works again
- Set active layer (name column click) now works again

---

Version 0.6.12 (Fix Visibility Icon Update Column)
Date: 2025-12-04
Git Tag: v0.6.12 (to be created)

Bug Fixes:
- Fixed toggle_layer_visibility to update icon in column 1 instead of column 0
- Visibility icons now properly change from üëÅ to ‚úñ when toggled
- No more ghost icons appearing in column 0 (arrow column)

Technical Details:
- toggle_layer_visibility was calling item.setIcon(0, ...) and item.setText(0, ...)
- Changed to item.setIcon(1, ...) and item.setText(1, ...)
- Icons now update in correct visibility column

---

FUTURE VERSIONS
===============

Version 0.7.0 (Planned)
- Bulk layer visibility & freeze control with isolation mode
- Freeze/unfreeze toggle
- Isolate mode (hide all except selected)

Version 0.8.0 (Planned)
- Quick object selection by layer (click to select all objects)
- Object list display in bottom panel

---

HOW TO JUMP TO A VERSION:
1. View available tags: git tag
2. Jump to a version: git checkout v0.1.0
3. Return to latest: git checkout main
4. Create a new tag: git tag -a v0.2.0 -m "Description"
